(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{77826:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin/Purchase",function(){return a(48637)}])},14201:function(e,t,a){"use strict";var s=a(85893),i=a(38761),r=a(17636),n=a(8572),l=a(32335),u=a(88265),c=a(76964);a(91259);var d=a(94205),o=a(39828),m=a(67294),p=a(22971);t.Z=function(e){let{open:t,onClose:a}=e,[h]=(0,p.Z)(),[x,y]=(0,m.useState)(!1),Z=async e=>{console.log("Success:",e);try{y(!0);let t=(0,o.hJ)(d.db,"products");await (0,o.ET)(t,e),h.resetFields(),y(!1),a(),i.ZP.success("Product ADDED Successfully")}catch(e){i.ZP.error(e.message),y(!1)}};return(0,s.jsx)(r.Z,{title:"Product Form",width:800,onClose:a,open:t,children:(0,s.jsxs)(n.Z,{name:"basic",form:h,layout:"vertical",initialValues:{remember:!0},onFinish:Z,onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,s.jsx)(n.Z.Item,{label:"Product Name",name:"title",rules:[{required:!0,message:"Please input your username!"}],children:(0,s.jsx)(l.Z,{})}),(0,s.jsx)(n.Z.Item,{label:"Product Desc",name:"desc",rules:[{required:!0,message:"Please input your product Description"}],children:(0,s.jsx)(l.Z,{})}),(0,s.jsx)(n.Z.Item,{label:"Image",name:"image",rules:[{required:!0,message:"Please input image link"}],children:(0,s.jsx)(l.Z,{})}),(0,s.jsx)(n.Z.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please input price"}],children:(0,s.jsx)(l.Z,{})}),(0,s.jsx)(n.Z.Item,{label:"Quantity",name:"quantity",rules:[{required:!0,message:"Please input quantity"}],children:(0,s.jsx)(l.Z,{})}),(0,s.jsx)(n.Z.Item,{label:"Unit",name:"unit",rules:[{required:!0,message:"Please input quantity"}],children:(0,s.jsxs)(u.ZP.Group,{children:[(0,s.jsx)(u.ZP,{value:"kg",children:" Kg "}),(0,s.jsx)(u.ZP,{value:"pack",children:" Pack "})]})}),(0,s.jsx)(n.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,s.jsx)(c.ZP,{loading:x,type:"primary",htmlType:"submit",children:"Submit"})})]})})}},78470:function(e,t,a){"use strict";var s=a(85893),i=a(38761),r=a(76156),n=a(17503),l=a(39828),u=a(67294),c=a(94205),d=a(63291),o=a(61492),m=a(93255);t.Z=function(){let{products:e,setProducts:t}=(0,u.useContext)(m.H),[a,p]=(0,u.useState)(!1);(0,u.useEffect)(()=>{h()},[]);let h=async()=>{try{p(!0);let e=(0,l.hJ)(c.db,"products"),a=await (0,l.PL)(e);if(!a.empty){let e=[];a.forEach(t=>{e.push({...t.data(),id:t.id})}),t([...e]),p(!1)}}catch(e){i.ZP.error(e.message),p(!1)}};return(0,s.jsx)(n.Z,{dataSource:e,columns:[{title:"Title",dataIndex:"title",key:"title"},{title:"Image",dataIndex:"image",key:"image",render:e=>(0,s.jsx)(r.Z,{src:e,height:50,width:50})},{title:"Price",dataIndex:"price",key:"price"},{title:"Unit",dataIndex:"unit",key:"unit"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Action",key:"action",render:()=>(0,s.jsxs)("div",{className:"flex gap-5",children:[(0,s.jsx)(d.Z,{className:"text-red-600"}),(0,s.jsx)(o.Z,{className:"text-blue-600"})]})}]})}},93255:function(e,t,a){"use strict";a.d(t,{H:function(){return i}}),a(85893),a(39828);var s=a(67294);a(94205);let i=(0,s.createContext)()},48637:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(85893),i=a(67294),r=a(76964);a(14201),a(78470);var n=a(38761),l=a(17636),u=a(8572),c=a(30258),d=a(32335),o=a(88265),m=a(94205),p=a(39828),h=a(22971),x=a(93255),y=function(e){let{open:t,onClose:a}=e,{products:y}=(0,i.useContext)(x.H),[Z]=(0,h.Z)(),[j,f]=(0,i.useState)(!1),P=async e=>{console.log("Success:",e);try{f(!0);let t=(0,p.hJ)(m.db,"purchases"),s=y.find(t=>t.title===e.title),i=(0,p.JU)(m.db,"products",s.id);await (0,p.ET)(t,e),await (0,p.r7)(i,{quantity:Number(s.quantity)+Number(e.quantity)}),Z.resetFields(),f(!1),a(),n.ZP.success("Purchase Added Successfully")}catch(e){n.ZP.error(e.message),f(!1)}};return(0,s.jsx)(l.Z,{title:"Purchase Form",width:800,onClose:a,open:t,children:(0,s.jsxs)(u.Z,{name:"basic",form:Z,layout:"vertical",initialValues:{remember:!0},onFinish:P,onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,s.jsx)(u.Z.Item,{label:"Product Name",name:"title",rules:[{required:!0,message:"Please input your username!"}],children:(0,s.jsx)(c.default,{children:y.map(e=>(0,s.jsx)(c.default.Option,{value:e.title,children:e.title},e.title))})}),(0,s.jsx)(u.Z.Item,{label:"Supplier",name:"desc",rules:[{required:!0,message:"Please input supplier"}],children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(u.Z.Item,{label:"Purchase Date ",name:"purchaseDate",rules:[{required:!0,message:"Please input purchase date"}],children:(0,s.jsx)(d.Z,{type:"date"})}),(0,s.jsx)(u.Z.Item,{label:"Bill Amount",name:"billAmount",rules:[{required:!0,message:"Please input bill Amount"}],children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(u.Z.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please input price"}],children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(u.Z.Item,{label:"Quantity",name:"quantity",rules:[{required:!0,message:"Please input quantity"}],children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(u.Z.Item,{label:"Unit",name:"unit",rules:[{required:!0,message:"Please input quantity"}],children:(0,s.jsxs)(o.ZP.Group,{children:[(0,s.jsx)(o.ZP,{value:"kg",children:" Kg "}),(0,s.jsx)(o.ZP,{value:"pack",children:" Pack "})]})}),(0,s.jsx)(u.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,s.jsx)(r.ZP,{loading:j,type:"primary",htmlType:"submit",children:"Submit"})})]})})},Z=a(17503),j=a(63291),f=a(61492),P=function(){let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(!1);(0,i.useEffect)(()=>{l()},[]);let l=async()=>{try{r(!0);let e=(0,p.hJ)(m.db,"purchases"),a=await (0,p.PL)(e);if(!a.empty){let e=[];a.forEach(t=>{e.push({...t.data(),id:t.id})}),t([...e]),r(!1)}}catch(e){n.ZP.error(e.message),r(!1)}};return(0,s.jsx)(Z.Z,{dataSource:e,columns:[{title:"Purchase Id",dataIndex:"id",key:"id"},{title:"Purchase Date",dataIndex:"purchaseDate",key:"purchaseDate"},{title:"Item",dataIndex:"title",key:"title"},{title:"Price",dataIndex:"price",key:"price"},{title:"Unit",dataIndex:"unit",key:"unit"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Action",key:"action",render:()=>(0,s.jsxs)("div",{className:"flex gap-5",children:[(0,s.jsx)(j.Z,{className:"text-red-600"}),(0,s.jsx)(f.Z,{className:"text-blue-600"})]})}]})},b=function(){let[e,t]=(0,i.useState)(!1);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between mb-5",children:[(0,s.jsx)("h1",{children:"All Purchase"}),(0,s.jsx)(r.ZP,{type:"primary",onClick:()=>{t(!0)},children:"Add Purchases"})]}),(0,s.jsx)(y,{onClose:()=>{t(!1)},open:e}),(0,s.jsx)(P,{})]})}},94205:function(e,t,a){"use strict";a.d(t,{I:function(){return l},db:function(){return u}});var s=a(83977),i=a(91259),r=a(39828);let n=(0,s.ZF)({apiKey:"AIzaSyCuQ3wNmtDNAZMhZe9MRjpTn1kAvDp4SOA",authDomain:"point-of-sale-8a42d.firebaseapp.com",projectId:"point-of-sale-8a42d",storageBucket:"point-of-sale-8a42d.appspot.com",messagingSenderId:"283428202868",appId:"1:283428202868:web:0c99ca55251c4294136421",measurementId:"G-Q0928NKHEQ"}),l=(0,i.v0)(n),u=(0,r.ad)(n)}},function(e){e.O(0,[16,257,837,825,761,335,417,292,572,136,888,774,179],function(){return e(e.s=77826)}),_N_E=e.O()}]);